{% extends "base.html" %}

{% block title %}Editar Salão - Vi Beauty{% endblock %}

{% block content %}
<div class="card register-container">
    <div class="text-center mb-3">
        <h2 class="page-title">
            <i class="fas fa-edit"></i> Editar Salão
        </h2>
        <p class="page-subtitle">
            Atualize os dados do salão cadastrado
        </p>
    </div>

    <form method="POST" action="{{ url_for('edit_salon', salon_id=salon.id) }}" id="editSalonForm">
        <div class="form-group">
            <label for="name">
                <i class="fas fa-store"></i> Nome do Salão <span class="required">*</span>
            </label>
            <input 
                type="text" 
                id="name" 
                name="name" 
                class="form-control" 
                placeholder="Digite o nome do salão"
                value="{{ salon.name }}"
                required
                maxlength="255"
            >
        </div>

        <div class="form-group">
            <label for="description">
                <i class="fas fa-align-left"></i> Descrição Curta
            </label>
            <textarea 
                id="description" 
                name="description" 
                class="form-control" 
                placeholder="Digite uma breve descrição do salão (opcional)"
                maxlength="255"
                rows="3"
            >{{ salon.description if salon.description else '' }}</textarea>
            <small class="field-note">Máximo de 255 caracteres</small>
        </div>

        <div class="form-group">
            <label for="address">
                <i class="fas fa-map-marker-alt"></i> Endereço Completo <span class="required">*</span>
            </label>
            <textarea 
                id="address" 
                name="address" 
                class="form-control" 
                placeholder="Digite o endereço completo do salão"
                required
                maxlength="500"
                rows="3"
            >{{ salon.address }}</textarea>
        </div>

        <div class="form-group">
            <label for="phone">
                <i class="fas fa-phone"></i> Telefone para Contato <span class="required">*</span>
            </label>
            <input 
                type="text" 
                id="phone" 
                name="phone" 
                class="form-control" 
                placeholder="(11) 99999-9999"
                value="{{ salon.phone }}"
                required
                maxlength="15"
            >
            <small class="field-note">Formato: (XX) XXXXX-XXXX</small>
        </div>

        <div class="form-group">
            <label for="image_url">
                <i class="fas fa-image"></i> URL da Imagem de Fachada <span class="required">*</span>
            </label>
            <input 
                type="url" 
                id="image_url" 
                name="image_url" 
                class="form-control" 
                placeholder="https://exemplo.com/imagem.jpg"
                value="{{ salon.image_url }}"
                required
                maxlength="500"
            >
            <small class="field-note">Informe uma URL válida da imagem (ex: https://...)</small>
        </div>

        <!-- Preview da imagem -->
        <div class="form-group">
            <label>
                <i class="fas fa-eye"></i> Preview da Imagem
            </label>
            <div class="image-preview-container">
                <img 
                    id="imagePreview" 
                    src="{{ salon.image_url }}" 
                    alt="Preview"
                    onerror="this.src='https://via.placeholder.com/400x300/6a2c70/ffffff?text=Imagem+Indisponível'"
                >
            </div>
        </div>

        <div class="form-group">
            <label>
                <i class="fas fa-calendar-week"></i> Dias de Funcionamento <span class="required">*</span>
            </label>
            <div class="form-row">
                <div class="form-group">
                    <label for="opening_day">De:</label>
                    <select id="opening_day" name="opening_day" class="form-control" required>
                        {% for value, label in weekdays %}
                            <option value="{{ value }}" {% if salon.opening_day == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="closing_day">Ate:</label>
                    <select id="closing_day" name="closing_day" class="form-control" required>
                        {% for value, label in weekdays %}
                            <option value="{{ value }}" {% if salon.closing_day == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>
                <i class="fas fa-clock"></i> Horario de Funcionamento <span class="required">*</span>
            </label>
            <div class="form-row">
                <div class="form-group">
                    <label for="opening_time">Abertura:</label>
                    <input 
                        type="time" 
                        id="opening_time" 
                        name="opening_time" 
                        class="form-control" 
                        value="{{ salon.opening_time|format_time if salon.opening_time else '09:00' }}"
                        required
                        step="1800"
                    >
                </div>
                <div class="form-group">
                    <label for="closing_time">Fechamento:</label>
                    <input 
                        type="time" 
                        id="closing_time" 
                        name="closing_time" 
                        class="form-control" 
                        value="{{ salon.closing_time|format_time if salon.closing_time else '18:00' }}"
                        required
                        step="1800"
                    >
                </div>
            </div>
            <small class="field-note">Horarios em formato 24h com intervalos de 30 minutos</small>
        </div>

        <div class="form-group text-center">
            <button type="submit" class="btn btn-primary btn-full-width">
                <i class="fas fa-save"></i> Salvar Alterações
            </button>
        </div>
    </form>

    <div class="text-center mt-3">
        <a href="{{ url_for('list_salons') }}" class="btn mt-3">
            <i class="fas fa-arrow-left"></i> Voltar para Lista
        </a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/edit_salon.js') }}"></script>
{% endblock %}

